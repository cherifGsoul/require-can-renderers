<html>
<head>
  <meta charset="utf-8">
  <title>Mustache Tests</title>
  <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
</head>
<body>
  <div id="mocha"></div>
  <div id="test"></div>
  <script src="deps/require.js"></script>
  <script src="../node_modules/mocha/mocha.js"></script>
  <script>
    mocha.setup('tdd');
     function assert(expr, msg) {
      if (!expr) throw new Error(msg || 'failed');
    }
  </script>
  <script>
    requirejs.config({
      paths : {
        'can'      : 'deps/can/can',
        'jquery'   : 'deps/jquery',
        'ejs' : '../lib/ejs'
      },
      shim: {
        jquery : {
          exports : 'jQuery'
        }
      }
    })
    require(['jquery', 'can/util/string', 'ejs!./init', 'can/view/modifiers'], function($, can, initView){
      suite('Mustache', function(){
        setup(function(){
          $('#test').html(initView({
            engine : 'ejs'
          }));
        });
        test('renders correctly', function(){
          var text = $('#test').text();
          assert('Hello from ejs!' === text)
        });
      });
      mocha.run();
    })
  </script>
</body>
</html>